<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>我的收藏 - 论语SDK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/v2/analects.css">
  <link rel="preconnect" href="https://fonts.loli.net">
  <link href="https://fonts.loli.net/css2?family=Inter:wght@400;500;600&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
  <script defer src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
    h1, h2, h3 { font-family: 'Noto Serif SC', serif; }
  </style>
</head>
<body class="text-gray-800 antialiased">

  <div class="container mx-auto max-w-4xl px-4 py-8">
    
	<header class="text-center mb-8 border-b pb-4">
	      <h1 class="text-3xl md:text-4xl font-bold text-gray-900">我的收藏</h1>
	      <p class="text-lg text-gray-500 mt-2">论语收藏，论语笔记</p>
	      <a href="/" class="text-blue-600 hover:underline mt-4 inline-block">&larr; 返回首页</a>

	      <div class="mt-6 max-w-lg mx-auto">
	        <div class="relative">
	          <span class="absolute inset-y-0 left-0 flex items-center pl-3">
	            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
	              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
	            </svg>
	          </span>
	          <input id="favorites-search-input" type="search" 
	                 class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" 
	                 placeholder="在您的收藏和笔记中搜索...">
	        </div>
	      </div>
	      </header>

	<main id="favorites-list-container" class="space-y-4">
	    <div class="favorite-card-skeleton">
	        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
	            <div class="skeleton-block" style="height: 20px; width: 30%;"></div>
	            <div class="skeleton-block" style="height: 24px; width: 24px; border-radius: 50%;"></div>
	        </div>
	        <div class="skeleton-block" style="height: 18px; width: 90%; margin-bottom: 12px;"></div>
	        <div class="skeleton-block" style="height: 18px; width: 70%;"></div>
	    </div>
	    <div class="favorite-card-skeleton">
	        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
	            <div class="skeleton-block" style="height: 20px; width: 30%;"></div>
	            <div class="skeleton-block" style="height: 24px; width: 24px; border-radius: 50%;"></div>
	        </div>
	        <div class="skeleton-block" style="height: 18px; width: 90%; margin-bottom: 12px;"></div>
	        <div class="skeleton-block" style="height: 18px; width: 70%;"></div>
	    </div>
	    <div class="favorite-card-skeleton">
	        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
	            <div class="skeleton-block" style="height: 20px; width: 30%;"></div>
	            <div class="skeleton-block" style="height: 24px; width: 24px; border-radius: 50%;"></div>
	        </div>
	        <div class="skeleton-block" style="height: 18px; width: 90%; margin-bottom: 12px;"></div>
	        <div class="skeleton-block" style="height: 18px; width: 70%;"></div>
	    </div>
	</main>

  </div>

  <header id="global-header" class="global-header"></header>

  <div id="analects-global-widget-container"></div>

  <script type="module" src="/v2/analects.js"></script>
<script type="module">
 (async () => {
  let sdk;
  try {
    sdk = new AnalectsSDK({
      supabaseUrl: 'https://btqbtibvevglwcpiewyu.supabase.co',
      supabaseKey: 'sb_publishable_Kl_dygwfqk0Uey1G-0rj3A_4sbCgnet'
    });
    
    // [核心] sdk.init() 会自动处理会话、页头和全局小部件的渲染。
    await sdk.init();

    // ---- 初始化完成后，只调用此页面专属的组件和功能 ----
    
    // 1. 渲染“我的收藏”列表
    await sdk.renderMyFavoritesPage(document.getElementById('favorites-list-container'));
    
    // 2. 初始化“我的收藏”页面的搜索功能
    sdk.initializeFavoritesSearch(
      document.getElementById('favorites-search-input'),
      document.getElementById('favorites-list-container')
    );

  } catch (e) {
    console.error("AnalectsSDK failed to initialize.", e);
    document.getElementById('favorites-list-container').innerHTML = '<div class="text-center text-red-500 py-8">SDK 初始化失败，请检查配置。</div>';
  }
  
  })();
</script>

</body>
</html>