<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>我的收藏 - 论语SDK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/v2/analects.css">
  <script defer src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
    h1, h2, h3 { font-family: 'Noto Serif SC', serif; }
    #toast {
      z-index: 2000 !important;
    }
  </style>
</head>
<body class="page-with-sticky-header text-gray-800 antialiased">
  <header id="global-header-wrapper"></header>
  <div class="container mx-auto max-w-3xl px-4 py-8">
    
	<header class="text-center mb-8 border-b pb-4">
	      <h1 class="text-3xl md:text-4xl font-bold text-gray-900">我的收藏</h1>
	      <p class="text-lg text-gray-500 mt-2">温故而知新，可以为师矣</p>
	      <a href="/" class="text-blue-600 hover:underline mt-4 inline-block">&larr; 返回首页</a>

	      <div class="mt-6 max-w-lg mx-auto">
	        <div class="relative">
	          <span class="absolute inset-y-0 left-0 flex items-center pl-3">
	            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
	              <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
	            </svg>
	          </span>
	          <input id="favorites-search-input" type="search" 
	                 class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500" 
	                 placeholder="在您的收藏和笔记中搜索...">
	        </div>
	      </div>
	</header>

	<main id="favorites-list-container" class="space-y-8">
	    <div class="verse-card-skeleton">
            <div class="skeleton-block" style="height: 32px; width: 80%; margin-bottom: 24px;"></div>
            <div class="skeleton-block" style="height: 24px; width: 100%; margin-bottom: 12px;"></div>
            <div class="skeleton-block" style="height: 24px; width: 100%; margin-bottom: 24px;"></div>
            <div class="skeleton-block" style="height: 40px; width: 100%;"></div>
        </div>
        <div class="verse-card-skeleton">
            <div class="skeleton-block" style="height: 32px; width: 70%; margin-bottom: 24px;"></div>
            <div class="skeleton-block" style="height: 24px; width: 100%; margin-bottom: 12px;"></div>
            <div class="skeleton-block" style="height: 24px; width: 100%; margin-bottom: 24px;"></div>
            <div class="skeleton-block" style="height: 40px; width: 100%;"></div>
        </div>
	</main>

  </div>

  <footer class="container mx-auto max-w-3xl px-4 mt-10 md:mt-12 pt-10 border-t border-gray-200">
    <div class="text-center text-sm text-gray-500">
        <p>&copy; <span id="year"></span> 论语SDK. Made with ❤️ by <a href="https://lehua.li" class="text-blue-600 hover:underline">lehua.li</a></p>
    </div>
  </footer>

  <div id="analects-global-widget-container"></div>

  <script type="module" src="/v2/analects.js"></script>
<script type="module">
 (async () => {
  let sdk;
  try {
    sdk = new AnalectsSDK({
      supabaseUrl: 'https://btqbtibvevglwcpiewyu.supabase.co',
      supabaseKey: 'sb_publishable_Kl_dygwfqk0Uey1G-0rj3A_4sbCgnet'
    });
 
    sdk.renderGlobalHeader();   
    await sdk.init();

    await sdk.renderMyFavoritesPage(document.getElementById('favorites-list-container'));
    
    sdk.initializeFavoritesSearch(
      document.getElementById('favorites-search-input'),
      document.getElementById('favorites-list-container')
    );
    
    // [核心修改] 2. 为新加入的页脚初始化年份
    const yearEl = document.getElementById('year');
    if (yearEl) {
      yearEl.textContent = new Date().getFullYear();
    }

  } catch (e) {
    console.error("AnalectsSDK failed to initialize.", e);
    document.getElementById('favorites-list-container').innerHTML = '<div class="text-center text-red-500 py-8">SDK 初始化失败，请检查配置。</div>';
  }
  
  })();
</script>

</body>
</html>