!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AnalectsSDK=t():e.AnalectsSDK=t()}("undefined"!=typeof self?self:this,function(){return function(){"use strict";var e={954:function(e,t,n){e=n.hmd(e);var a=["count"];function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,i,s=[],o=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=c.call(n)).done)&&(s.push(a.value),s.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function c(n,a,r,c){var o=a&&a.prototype instanceof s?a:s,l=Object.create(o.prototype);return u(l,"_invoke",function(n,a,r){var c,s,o,l=0,u=r||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,s=0,o=e,h.n=n,i}};function p(n,a){for(s=n,o=a,t=0;!d&&l&&!r&&t<u.length;t++){var r,c=u[t],p=h.p,v=c[2];n>3?(r=v===a)&&(o=c[(s=c[4])?5:(s=3,3)],c[4]=c[5]=e):c[0]<=p&&((r=n<2&&p<c[1])?(s=0,h.v=a,h.n=c[1]):p<v&&(r=n<3||c[0]>a||a>v)&&(c[4]=n,c[5]=a,h.n=v,s=0))}if(r||n>1)return i;throw d=!0,a}return function(r,u,v){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,v),s=u,o=v;(t=s<2?e:o)||!d;){c||(s?s<3?(s>1&&(h.n=-1),p(s,o)):h.n=o:h.v=o);try{if(l=2,c){if(s||(r="next"),t=c[r]){if(!(t=t.call(c,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=c.return)&&t.call(c),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);c=e}else if((t=(d=h.n<0)?o:n.call(a,h))!==i)break}catch(t){c=e,s=1,o=t}finally{l=1}}return{value:t,done:d}}}(n,r,c),!0),l}var i={};function s(){}function o(){}function d(){}t=Object.getPrototypeOf;var h=[][a]?t(t([][a]())):(u(t={},a,function(){return this}),t),p=d.prototype=s.prototype=Object.create(h);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e}return o.prototype=d,u(p,"constructor",d),u(d,"constructor",o),o.displayName="GeneratorFunction",u(d,r,"GeneratorFunction"),u(p),u(p,r,"Generator"),u(p,a,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:c,m:v}})()}function u(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}u=function(e,t,n,a){function c(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(c("next",0),c("throw",1),c("return",2))},u(e,t,n,a)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function f(e,t,n,a,r,c,i){try{var s=e[c](i),o=s.value}catch(e){return void n(e)}s.done?t(o):Promise.resolve(o).then(a,r)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var c=e.apply(t,n);function i(e){f(c,a,r,i,s,"next",e)}function s(e){f(c,a,r,i,s,"throw",e)}i(void 0)})}}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,g(a.key),a)}}function g(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var b=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.supabaseUrl=t.supabaseUrl||"https://your-project.supabase.co",this.supabaseKey=t.supabaseKey||"your-anon-key",this.apiBaseUrl="".concat(this.supabaseUrl,"/rest/v1"),this.headers={apikey:this.supabaseKey,Authorization:"Bearer ".concat(this.supabaseKey),"Content-Type":"application/json",Prefer:"return=representation"},this.cache={characters:null,arguments:null,proverbs:null,chapters:null},this.selectedItems={characters:new Map,arguments:new Map,proverbs:new Map,chapter:{id:"all",name:"å…¨éƒ¨ç« èŠ‚"}},this.pagination={pageSize:10,currentPage:0,totalLoaded:0,isLoading:!1,hasMore:!0,totalCount:0,loadedIds:new Set},this.currentFilters={},this.isSearchInitialized=!1,this.scrollListener=null,this.isAutoLoadingEnabled=!1,this.searchConditionsChanged=!1},t=[{key:"validateConfig",value:function(){if(!this.supabaseUrl||this.supabaseUrl.includes("your-project"))throw new Error("è¯·å…ˆé…ç½®æ­£ç¡®çš„ Supabase URL");if(!this.supabaseKey||this.supabaseKey.includes("your-anon-key"))throw new Error("è¯·å…ˆé…ç½®æ­£ç¡®çš„ Supabase Key")}},{key:"apiRequest",value:(T=m(l().m(function e(t){var n,r,c,i,s,o,u,d,p,f,m=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},this.validateConfig(),r=n.count,c=v(n,a),i="".concat(this.apiBaseUrl,"/").concat(t),Object.keys(c).length>0&&(i+="?"+new URLSearchParams(c).toString()),s=h({},this.headers),r&&(o=s.Prefer||"",s.Prefer=o?"".concat(o,", count=").concat(r):"count=".concat(r)),e.n=1,fetch(i,{method:"GET",headers:s,mode:"cors"});case 1:if((u=e.v).ok){e.n=3;break}return e.n=2,u.text();case 2:throw e.v,new Error("APIè¯·æ±‚å¤±è´¥: ".concat(u.status," ").concat(u.statusText));case 3:return e.n=4,u.json();case 4:return d=e.v,r&&(p=u.headers.get("Content-Range"))&&(f=p.match(/\/(\d+)$/))&&(d.count=parseInt(f[1],10)),e.a(2,d)}},e,this)})),function(e){return T.apply(this,arguments)})},{key:"fetchAnalects",value:(C=m(l().m(function e(){var t,n,a,r,c,i,s,o,u=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:0,a=u.length>2&&void 0!==u[2]?u[2]:10,e.p=1,r=this.buildQueryParams(t,n,a),e.n=2,this.apiRequest("analects_entries_expanded",r);case 2:if(c=e.v,i=this.removeDuplicates(c),0!==n){e.n=4;break}return e.n=3,this.getTotalCount(t);case 3:this.pagination.totalCount=e.v;case 4:return s=n*a+i.length,o=s<this.pagination.totalCount,e.a(2,{data:i,hasMore:o,total:i.length,totalCount:this.pagination.totalCount});case 5:throw e.p=5,e.v;case 6:return e.a(2)}},e,this,[[1,5]])})),function(){return C.apply(this,arguments)})},{key:"buildQueryParams",value:function(e,t,n){var a={select:"*,entry_characters(character_id,characters(id,name)),entry_arguments(argument_id,arguments(id,title)),entry_proverbs(proverbs(*))",order:"id.asc",limit:n,offset:t*n};if(e.chapter&&"all"!==e.chapter&&e.chapter.trim()&&(a.chapter="eq.".concat(e.chapter.trim())),e.characterIds&&e.characterIds.length>0&&(a.character_ids="cs.{".concat(e.characterIds.join(","),"}")),e.argumentIds&&e.argumentIds.length>0&&(a.argument_ids="cs.{".concat(e.argumentIds.join(","),"}")),e.proverbIds&&e.proverbIds.length>0&&(a.proverb_ids="cs.{".concat(e.proverbIds.join(","),"}")),e.keyword&&e.keyword.trim()){var r=e.keyword.trim().replace(/%/g,"").split(/\s+/).filter(function(e){return e.length>0});if(r.length>0){var c=r.map(function(e){var t=["original_text.ilike.*".concat(e,"*"),"translation.ilike.*".concat(e,"*"),"annotation.ilike.*".concat(e,"*"),"personal_insight.ilike.*".concat(e,"*")];return"or(".concat(t.join(","),")")});a.and="(".concat(c.join(","),")")}}return a}},{key:"highlightKeywords",value:function(e,t){var n=this;if(!e||!t)return this.escapeHtml(e||"");var a=this.escapeHtml(e),r=t.trim().split(/\s+/).filter(function(e){return e.length>0});return 0===r.length||r.forEach(function(e){if(e.length>0){var t=n.escapeHtml(e),r=new RegExp("(".concat(n.escapeRegExp(t),")"),"gi");a=a.replace(r,'<mark class="keyword-highlight">$1</mark>')}}),a}},{key:"escapeHtml",value:function(e){if(!e)return"";var t=document.createElement("div");return t.textContent=e,t.innerHTML}},{key:"escapeRegExp",value:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},{key:"removeDuplicates",value:function(e){var t,n=[],a=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;c.id&&!a.has(c.id)&&(a.add(c.id),n.push(c))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getTotalCount",value:(L=m(l().m(function e(t){var n,a,r,c,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={select:"id",count:"exact",limit:0},t.chapter&&"all"!==t.chapter&&t.chapter.trim()&&(n.chapter="eq.".concat(t.chapter.trim())),t.characterIds&&t.characterIds.length>0&&(n.character_ids="cs.{".concat(t.characterIds.join(","),"}")),t.argumentIds&&t.argumentIds.length>0&&(n.argument_ids="cs.{".concat(t.argumentIds.join(","),"}")),t.proverbIds&&t.proverbIds.length>0&&(n.proverb_ids="cs.{".concat(t.proverbIds.join(","),"}")),t.keyword&&t.keyword.trim()&&(a=t.keyword.trim().replace(/%/g,""),(r=a.split(/\s+/).filter(function(e){return e.length>0})).length>0&&(c=r.map(function(e){var t=["original_text.ilike.*".concat(e,"*"),"translation.ilike.*".concat(e,"*"),"annotation.ilike.*".concat(e,"*"),"personal_insight.ilike.*".concat(e,"*")];return"or(".concat(t.join(","),")")}),n.and="(".concat(c.join(","),")"))),e.n=1,this.apiRequest("analects_entries_expanded",n);case 1:return i=e.v,e.a(2,i.count||0);case 2:return e.p=2,e.v,e.a(2,0)}},e,this,[[0,2]])})),function(e){return L.apply(this,arguments)})},{key:"sortByPinyin",value:function(e,t){return e.sort(function(e,n){var a=e[t]||"",r=n[t]||"";return a.localeCompare(r,"zh-CN",{numeric:!0,sensitivity:"base"})})}},{key:"sortChaptersByNumber",value:function(e){var t=this;return e.sort(function(e,n){var a=function(e){var n=e.match(/ç¬¬([ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒä¸‡]+|[0-9]+)/);if(!n)return 0;var a=n[1];return/^\d+$/.test(a)?parseInt(a,10):t.chineseToNumber(a)};return a(e.name||e)-a(n.name||n)})}},{key:"chineseToNumber",value:function(e){var t={"é›¶":0,"ä¸€":1,"äºŒ":2,"ä¸‰":3,"å››":4,"äº”":5,"å…­":6,"ä¸ƒ":7,"å…«":8,"ä¹":9,"å":10,"ç™¾":100,"åƒ":1e3,"ä¸‡":1e4};if(t[e])return t[e];var n=0,a=0;e.startsWith("å")&&(n=10,e=e.substring(1));for(var r=0;r<e.length;r++){var c=t[e[r]];c<10?a=c:10===c?(0===a&&(a=1),n+=10*a,a=0):100===c?(0===a&&(a=1),n+=100*a,a=0):1e3===c?(0===a&&(a=1),n+=1e3*a,a=0):1e4===c&&(0===a&&(a=1),n=1e4*(n+a),a=0)}return n+=a}},{key:"getData",value:(E=m(l().m(function e(t){var n,a,r,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.cache[t]){e.n=1;break}return e.a(2,this.cache[t]);case 1:return n={characters:"characters?order=name.asc",arguments:"arguments?order=title.asc",proverbs:"proverbs?order=content.asc",chapters:"analects_entries?select=chapter&order=chapter.asc"},e.p=2,e.n=3,this.apiRequest(n[t].split("?")[0],Object.fromEntries(new URLSearchParams(n[t].split("?")[1]||"")));case 3:return a=e.v,"chapters"===t?(r=i(new Set(a.map(function(e){return e.chapter}))).filter(function(e){return e&&"string"==typeof e&&e.trim()}).map(function(e){return{id:e,name:e}}),a=this.sortChaptersByNumber(r)):(c="characters"===t?"name":"arguments"===t?"title":"proverbs"===t?"content":null)&&(a=this.sortByPinyin(a,c)),this.cache[t]=a,e.a(2,a);case 4:if(e.p=4,"Failed to fetch"!==(s=e.v).message){e.n=5;break}throw new Error("ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Supabase é…ç½®å’Œç½‘ç»œè¿æ¥");case 5:throw s;case 6:return e.a(2)}},e,this,[[2,4]])})),function(e){return E.apply(this,arguments)})},{key:"getCharacters",value:(I=m(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getData("characters"))},e,this)})),function(){return I.apply(this,arguments)})},{key:"getArguments",value:(S=m(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getData("arguments"))},e,this)})),function(){return S.apply(this,arguments)})},{key:"getProverbs",value:(k=m(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getData("proverbs"))},e,this)})),function(){return k.apply(this,arguments)})},{key:"getChapters",value:(w=m(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getData("chapters"))},e,this)})),function(){return w.apply(this,arguments)})},{key:"getDailyAnalect",value:(b=m(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.apiRequest("analects_entries_expanded",{select:"chapter,section_number,original_text,translation",show_in_daily:"eq.true"});case 1:if(0!==(t=e.v).length){e.n=2;break}return e.a(2,null);case 2:return n=Math.floor(Math.random()*t.length),e.a(2,t[n]);case 3:throw e.p=3,e.v;case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return b.apply(this,arguments)})},{key:"advancedSearch",value:(g=m(l().m(function e(){var t,n,a=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.n=1,this.fetchAnalects(t,0,1e3);case 1:return n=e.v,e.a(2,n.data)}},e,this)})),function(){return g.apply(this,arguments)})},{key:"formatDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"][e.getDay()];return{full:"".concat(t,"å¹´").concat(n,"æœˆ").concat(a,"æ—¥"),weekday:r,iso:e.toISOString().split("T")[0]}}},{key:"generateShareLinks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n="æ¯æ—¥è®ºè¯­ï¼š".concat(e.original_text),a=t;return{twitter:"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(n),"&url=").concat(encodeURIComponent(a)),facebook:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(a)),copy:n+" - "+a,email:"mailto:?subject=".concat(encodeURIComponent("æ¯æ—¥è®ºè¯­åˆ†äº«"),"&body=").concat(encodeURIComponent(n+" - "+a))}}},{key:"copyToClipboard",value:(f=m(l().m(function e(t){var n,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!navigator.clipboard){e.n=2;break}return e.n=1,navigator.clipboard.writeText(t);case 1:return e.a(2,!0);case 2:return(n=document.createElement("textarea")).value=t,Object.assign(n.style,{position:"fixed",left:"-999999px",top:"-999999px"}),document.body.appendChild(n),n.focus(),n.select(),a=document.execCommand("copy"),document.body.removeChild(n),e.a(2,a);case 3:e.n=5;break;case 4:return e.p=4,e.v,e.a(2,!1);case 5:return e.a(2)}},e,null,[[0,4]])})),function(e){return f.apply(this,arguments)})},{key:"renderAnalectCard",value:function(e,t){if(t){var n=document.createElement("div");n.className="analects-result-card",n.innerHTML=this.generateResultCardHTML(e),t.appendChild(n),setTimeout(function(){return n.classList.add("animate-in")},10)}}},{key:"generateResultCardHTML",value:function(e){var t,n=this,a=(null===(t=this.currentFilters)||void 0===t?void 0:t.keyword)||"",r=function(e,t){return(e||[]).map(function(e){var n,a,r;return(null===(n=e[t])||void 0===n?void 0:n.name)||(null===(a=e[t])||void 0===a?void 0:a.title)||(null===(r=e[t])||void 0===r?void 0:r.content)}).filter(Boolean)},c=r(e.entry_characters,"characters"),i=r(e.entry_arguments,"arguments"),s=r(e.entry_proverbs,"proverbs"),o=function(e,t,a){return t.length>0?'\n        <div class="analects-result-tag-group">\n          <span class="analects-result-tag-label">'.concat(e,":</span>\n          ").concat(t.map(function(e){return'<span class="analects-result-tag '.concat(a,'">').concat(n.escapeHtml(e),"</span>")}).join(""),"\n        </div>\n      "):""},l=this.highlightKeywords(e.original_text,a),u=e.translation?this.highlightKeywords(e.translation,a):"",d=e.annotation?this.highlightKeywords(e.annotation,a):"";return'\n      <div class="analects-result-header">\n        <span class="analects-result-chapter">'.concat(this.escapeHtml(e.chapter||""),'</span>\n        <span class="analects-result-section">ç¬¬').concat(this.escapeHtml(e.section_number||""),'èŠ‚</span>\n      </div>\n    \n      <div class="analects-result-content">\n        <div class="analects-result-original">').concat(l,"</div>\n        ").concat(u?'<div class="analects-result-translation">'.concat(u,"</div>"):"","\n        ").concat(d?'<div class="analects-result-annotation">'.concat(d,"</div>"):"",'\n      </div>\n\n      <div class="analects-result-tags">\n        ').concat(o("äººç‰©",c,"character"),"\n        ").concat(o("è®ºç‚¹",i,"argument"),"\n        ").concat(o("è°šè¯­",s,"proverb"),"\n      </div>\n    ")}},{key:"renderSearchInterface",value:function(e){e&&(e.innerHTML=this.getSearchInterfaceHTML(),this.initializeSearchEvents(),this.loadSearchOptions(),this.initializeScrollFeatures(),this.isSearchInitialized=!0)}},{key:"getSearchInterfaceHTML",value:function(){return'\n      <div class="analects-search">\n        <div class="analects-search-header">\n          <h1 class="analects-search-title">è®ºè¯­æœç´¢</h1>\n          <p class="analects-search-subtitle">Search in the Analects of Confucius</p>\n        </div>\n\n        <div class="analects-search-form">\n          <div class="analects-keyword-section">\n            <label class="analects-keyword-label" for="analects-keyword">ğŸ” å…³é”®è¯æœç´¢</label>\n            <input type="text" id="analects-keyword" class="analects-input" \n                   placeholder="è¾“å…¥å…³é”®è¯æœç´¢è®ºè¯­åŸæ–‡ã€ç¿»è¯‘æˆ–æ³¨é‡Š... æŒ‰å›è½¦æˆ–ç‚¹å‡»å¼€å§‹æœç´¢">\n            \n            <div class="analects-selected-items" id="selected-items-container" style="display: none;">\n              <h4>å·²é€‰æ‹©çš„æœç´¢æ¡ä»¶</h4>\n              <div class="analects-selected-tags" id="selected-tags-container">\n                <div class="analects-selected-empty">æš‚æ— é€‰æ‹©çš„æœç´¢æ¡ä»¶</div>\n              </div>\n            </div>\n          </div>\n\n          <div class="analects-advanced-filters">\n            <h3 class="analects-advanced-title">é«˜çº§æœç´¢</h3>\n            \n            '.concat(this.createSearchSection("chapter","ç« èŠ‚","single-column"),'\n            \n            <div class="analects-filters-grid">\n              ').concat(this.createSearchSection("character","äººç‰©"),"\n              ").concat(this.createSearchSection("argument","è®ºç‚¹"),'\n            </div>\n\n            <div class="analects-filters-grid" style="margin-top: 24px;">\n              ').concat(this.createSearchSection("proverb","è°šè¯­","full-width"),'\n            </div>\n          </div>\n\n          <div class="analects-search-actions">\n            <button id="analects-search-btn" class="analects-btn">ğŸ” å¼€å§‹æœç´¢</button>\n            <button id="analects-reset-btn" class="analects-btn analects-btn-clear">ğŸ”„ é‡ç½®æœç´¢</button>\n          </div>\n        </div>\n        \n        <div id="analects-search-status" class="analects-search-status"></div>\n\n        <div class="analects-results">\n          <div id="analects-results-container" class="analects-results-container"></div>\n          <div id="analects-loading-more" style="display:none; text-align:center; margin:10px; color:#666;">\n            åŠ è½½ä¸­...\n          </div>\n          <div id="analects-load-complete" style="display:none; text-align:center; margin:20px; color:#888;">\n            â€”â€” âœ¨ å·²å…¨éƒ¨æ˜¾ç¤ºå®Œæ¯• âœ¨ â€”â€”\n          </div>\n        </div>\n\n        <div id="scroll-to-top" class="analects-scroll-indicator">â†‘</div>\n      </div>\n    ')}},{key:"createSearchSection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="full-width"===n?'style="grid-column: 1 / -1;"':"";return'\n      <div class="'.concat("single-column"===n?"analects-filters-grid single-column":"analects-filter-section",'" ').concat(a,'>\n        <div class="analects-filter-section">\n          <div class="analects-filter-header">\n            <h4 class="analects-filter-title ').concat({chapter:"chapters",character:"characters",argument:"arguments",proverb:"proverbs"}[e],'">').concat(t,'</h4>\n            <span class="analects-filter-count" id="').concat(e,'-count">0</span>\n          </div>\n          <div class="analects-filter-search">\n            <input type="text" id="').concat(e,'-search" placeholder="æœç´¢').concat(t.replace("æœç´¢",""),'...">\n          </div>\n          <div id="').concat(e,'-filters" class="analects-filter-options">\n            <div class="analects-loading">åŠ è½½ä¸­...</div>\n          </div>\n        </div>\n      </div>\n    ')}},{key:"renderDailyAnalect",value:function(e){var t=this;e&&(e.innerHTML='<div class="analects-loading">åŠ è½½æ¯æ—¥è®ºè¯­...</div>',this.getDailyAnalect().then(function(n){if(n){var a=t.formatDate(),r=t.generateShareLinks(n);e.innerHTML=t.getDailyAnalectHTML(n,a,r)}else e.innerHTML='<div class="analects-daily-empty">æš‚æ— æ¯æ—¥è®ºè¯­</div>'}).catch(function(t){e.innerHTML='<div class="analects-daily-error">åŠ è½½æ¯æ—¥è®ºè¯­å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®</div>'}))}},{key:"getDailyAnalectHTML",value:function(e,t,n){return'\n      <div class="analects-daily">\n        <div class="analects-daily-header">\n          <h1 class="analects-daily-title">æ¯æ—¥è®ºè¯­</h1>\n          <p class="analects-daily-subtitle">Daily Analects of Confucius</p>\n          <div class="analects-daily-date">'.concat(t.full," Â· ").concat(t.weekday,'</div>\n        </div>\n\n        <div class="analects-daily-card">\n          <div class="analects-daily-original">').concat(e.original_text,"</div>\n          ").concat(e.translation?'<div class="analects-daily-translation">'.concat(e.translation,"</div>"):"",'\n          <div class="analects-daily-reference">').concat(e.chapter," Â· ç¬¬").concat(e.section_number||"",'èŠ‚</div>\n        </div>\n\n        <div class="analects-daily-share">\n          <span class="analects-daily-share-label">åˆ†äº«ï¼š</span>\n          <div class="analects-share-buttons">\n            ').concat(this.createShareButton("twitter",n.twitter,"åˆ†äº«åˆ° Twitter"),"\n            ").concat(this.createShareButton("facebook",n.facebook,"åˆ†äº«åˆ° Facebook",!0),"\n            ").concat(this.createShareButton("copy",null,"å¤åˆ¶åˆ†äº«å†…å®¹",!1,n.copy),"\n            ").concat(this.createShareButton("email",n.email,"é€šè¿‡é‚®ä»¶åˆ†äº«"),"\n          </div>\n        </div>\n      </div>\n    ")}},{key:"createShareButton",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={twitter:'<path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>',facebook:'<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>',copy:'<path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>',email:'<path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>'};if("copy"===e)return'\n        <button class="analects-share-btn copy" \n                onclick="window.AnalectsSDK.copyText(\''.concat((arguments.length>4&&void 0!==arguments[4]?arguments[4]:null).replace(/'/g,"\\'"),'\', this)"\n                title="').concat(n,'">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">').concat(r[e],"</svg>\n        </button>\n      ");var c=a?"onclick=\"return window.open(this.href, '".concat(e,"-share', 'width=626,height=436,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes')\""):"";return'\n      <a href="'.concat(t,'" class="analects-share-btn ').concat(e,'" target="_blank" rel="noopener noreferrer" \n         ').concat(c,' title="').concat(n,'">\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">').concat(r[e],"</svg>\n      </a>\n    ")}},{key:"initializeSearchEvents",value:function(){var e=this,t={"analects-search-btn":function(){return e.performSearch()},"analects-reset-btn":function(){return e.resetSearch()}};Object.entries(t).forEach(function(e){var t=c(e,2),n=t[0],a=t[1],r=document.getElementById(n);r&&r.addEventListener("click",a)});var n=document.getElementById("analects-keyword");n&&(n.addEventListener("keypress",function(t){"Enter"===t.key&&e.performSearch()}),n.addEventListener("input",function(){e.markSearchConditionsChanged()})),["character","argument","proverb","chapter"].forEach(function(t){var n=document.getElementById("".concat(t,"-search"));n&&n.addEventListener("input",function(n){e.filterOptions(t,n.target.value)})})}},{key:"markSearchConditionsChanged",value:function(){this.searchConditionsChanged=!0;var e=document.getElementById("analects-search-btn");e&&this.searchConditionsChanged&&e.classList.add("search-changed")}},{key:"initializeScrollFeatures",value:function(){var e=document.getElementById("scroll-to-top");e&&(e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",function(){e.classList.toggle("visible",window.scrollY>300)})),this.setupAutoLoad()}},{key:"setupAutoLoad",value:function(){var e=this;this.scrollListener&&window.removeEventListener("scroll",this.scrollListener),this.scrollListener=function(){if(e.isAutoLoadingEnabled&&!e.pagination.isLoading&&e.pagination.hasMore&&0!==e.pagination.totalLoaded){var t=document.getElementById("analects-results-container");t&&t.getBoundingClientRect().bottom<=window.innerHeight+200&&e.loadMoreResults()}},window.addEventListener("scroll",this.scrollListener,{passive:!0})}},{key:"loadSearchOptions",value:(p=m(l().m(function e(){var t,n,a,r,i,s,o,u,d,h=this;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,(t=document.getElementById("analects-search-status"))&&(t.innerHTML='<div class="analects-info">ğŸ“„ åŠ è½½æœç´¢é€‰é¡¹...</div>'),e.n=1,Promise.all([this.getCharacters(),this.getArguments(),this.getProverbs(),this.getChapters()]);case 1:n=e.v,a=c(n,4),r=a[0],i=a[1],s=a[2],o=a[3],u={character:r,argument:i,proverb:s,chapter:o},Object.entries(u).forEach(function(e){var t=c(e,2),n=t[0],a=t[1];h.updateSearchCount(n,a.length),h.renderSearchOptions("".concat(n,"-filters"),a,n)}),t&&(t.innerHTML='<div class="analects-success">âœ… æœç´¢é€‰é¡¹åŠ è½½å®Œæˆ</div>',setTimeout(function(){return t.innerHTML=""},2e3)),e.n=3;break;case 2:e.p=2,d=e.v,this.showSearchLoadError(d);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return p.apply(this,arguments)})},{key:"showSearchLoadError",value:function(e){var t=document.getElementById("analects-search-status");t&&(t.innerHTML='<div class="analects-error">âŒ åŠ è½½æœç´¢é€‰é¡¹å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®</div>'),["character","argument","proverb","chapter"].forEach(function(e){var t=document.getElementById("".concat(e,"-filters"));t&&(t.innerHTML='<div class="analects-no-options">æ•°æ®åŠ è½½å¤±è´¥</div>')})}},{key:"updateSearchCount",value:function(e,t){var n=document.getElementById("".concat(e,"-count"));n&&(n.textContent=t)}},{key:"renderSearchOptions",value:function(e,t,n){var a=this,r=document.getElementById(e);if(r&&Array.isArray(t))if(0!==t.length){var c=document.createElement("div");if(c.className="analects-tag-cloud",c.setAttribute("data-type",n),"chapter"===n){var i=this.createOptionTag("all","å…¨éƒ¨ç« èŠ‚",n,!0);c.appendChild(i),this.selectedItems.chapter={id:"all",name:"å…¨éƒ¨ç« èŠ‚"}}t.forEach(function(e){if(e&&(e.id||0===e.id)){var t=e.name||e.title||e.content||"é€‰é¡¹".concat(e.id),r=a.createOptionTag(e.id,t,n,!1);c.appendChild(r)}}),r.innerHTML="",r.appendChild(c)}else r.innerHTML='<div class="analects-no-options">æš‚æ— é€‰é¡¹</div>';else r&&(r.innerHTML='<div class="analects-no-options">æ•°æ®æ ¼å¼é”™è¯¯</div>')}},{key:"createOptionTag",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=document.createElement("label");return c.className="analects-option-tag ".concat(r?"selected":""),c.setAttribute("data-id",e),c.setAttribute("data-name",t.toLowerCase()),c.innerHTML='\n      <input type="checkbox" value="'.concat(e,'" data-type="').concat(n,'" ').concat(r?"checked":"",">\n      <span>").concat(t,"</span>\n    "),c.addEventListener("click",function(r){r.preventDefault(),r.stopPropagation(),a.handleOptionClick(c,n,e,t)}),c}},{key:"handleOptionClick",value:function(e,t,n,a){var r=e.querySelector('input[type="checkbox"]'),c=e.closest(".analects-tag-cloud");if("chapter"===t)c.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.checked=!1,e.closest(".analects-option-tag").classList.remove("selected")}),r.checked=!0,e.classList.add("selected"),this.selectedItems.chapter={id:n,name:a};else{var i=r.checked;r.checked=!i,e.classList.toggle("selected",r.checked),r.checked?this.addSelectedItem(t,n,a):this.removeSelectedItem(t,n)}this.markSearchConditionsChanged(),this.renderSelectedItems()}},{key:"addSelectedItem",value:function(e,t,n){var a=e+"s";this.selectedItems[a].set(parseInt(t),n)}},{key:"removeSelectedItem",value:function(e,t){var n=e+"s";this.selectedItems[n].delete(parseInt(t))}},{key:"renderSelectedItems",value:function(){var e=this,t=document.getElementById("selected-items-container"),n=document.getElementById("selected-tags-container");if(t&&n)if(0!==this.selectedItems.characters.size+this.selectedItems.arguments.size+this.selectedItems.proverbs.size+(this.selectedItems.chapter&&"all"!==this.selectedItems.chapter.id?1:0)){if(t.style.display="block",n.innerHTML="",this.selectedItems.chapter&&"all"!==this.selectedItems.chapter.id){var a=this.createSelectedTag("chapter",this.selectedItems.chapter.id,this.selectedItems.chapter.name);n.appendChild(a)}["characters","arguments","proverbs"].forEach(function(t){e.selectedItems[t].forEach(function(a,r){var c=e.createSelectedTag(t.slice(0,-1),r,a);n.appendChild(c)})})}else t.style.display="none"}},{key:"createSelectedTag",value:function(e,t,n){var a=this,r=document.createElement("div");return r.className="analects-selected-tag ".concat(e),r.innerHTML="\n      <span>".concat(n,'</span>\n      <span class="remove-tag" data-type="').concat(e,'" data-id="').concat(t,'">Ã—</span>\n    '),r.querySelector(".remove-tag").addEventListener("click",function(n){n.stopPropagation(),a.removeSelectedItemById(e,t)}),r}},{key:"removeSelectedItemById",value:function(e,t){if("chapter"===e){this.selectedItems.chapter={id:"all",name:"å…¨éƒ¨ç« èŠ‚"};var n=document.querySelector('input[data-type="chapter"][value="all"]'),a=document.querySelector('input[data-type="chapter"][value="'.concat(t,'"]'));n&&(n.checked=!0,n.closest(".analects-option-tag").classList.add("selected")),a&&(a.checked=!1,a.closest(".analects-option-tag").classList.remove("selected"))}else{this.removeSelectedItem(e,t);var r=document.querySelector('input[data-type="'.concat(e,'"][value="').concat(t,'"]'));if(r){r.checked=!1;var c=r.closest(".analects-option-tag");c&&c.classList.remove("selected")}}this.markSearchConditionsChanged(),this.renderSelectedItems()}},{key:"filterOptions",value:function(e,t){var n=document.getElementById("".concat(e,"-filters"));if(n){var a=n.querySelectorAll(".analects-option-tag"),r=t.toLowerCase().trim(),c=0;a.forEach(function(e){var t=e.getAttribute("data-name"),n=!r||t.includes(r);e.style.display=n?"inline-flex":"none",n&&c++});var i=document.getElementById("".concat(e,"-count"));if(i){var s=a.length;i.textContent=r?"".concat(c,"/").concat(s):s}}}},{key:"performSearch",value:(d=m(l().m(function e(){var t,n,a,r,c,i,s,o,u,d,h,p,v,f,m;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isSearchInitialized){e.n=1;break}return e.a(2);case 1:if(r=null===(t=document.getElementById("analects-keyword"))||void 0===t?void 0:t.value,c=document.getElementById("analects-results-container"),i=document.getElementById("analects-search-status"),s=document.getElementById("analects-load-complete"),o=document.getElementById("analects-loading-more"),c){e.n=2;break}return e.a(2);case 2:return u=Array.from(this.selectedItems.characters.keys()),d=Array.from(this.selectedItems.arguments.keys()),h=Array.from(this.selectedItems.proverbs.keys()),p="all"===(null===(n=this.selectedItems.chapter)||void 0===n?void 0:n.id)?"all":(null===(a=this.selectedItems.chapter)||void 0===a?void 0:a.id)||"all",this.currentFilters={keyword:null==r?void 0:r.trim(),characterIds:u,argumentIds:d,proverbIds:h,chapter:p},this.resetPagination(),this.searchConditionsChanged=!1,this.isAutoLoadingEnabled=!1,(v=document.getElementById("analects-search-btn"))&&v.classList.remove("search-changed"),s&&(s.style.display="none"),o&&(o.style.display="none"),i&&(i.innerHTML='<div class="analects-info">ğŸ” æœç´¢ä¸­...</div>'),c.innerHTML="",e.p=3,e.n=4,this.fetchAnalects(this.currentFilters,0,this.pagination.pageSize);case 4:f=e.v,this.isAutoLoadingEnabled=!0,this.handleFirstSearchResult(f,i,c),e.n=6;break;case 5:e.p=5,m=e.v,this.handleSearchError(m,i,c);case 6:return e.a(2)}},e,this,[[3,5]])})),function(){return d.apply(this,arguments)})},{key:"handleFirstSearchResult",value:(u=m(l().m(function e(t,n,a){var r,c,i,s=this;return l().w(function(e){for(;;)switch(e.n){case 0:if(0!==t.data.length){e.n=1;break}return n&&(n.innerHTML='<div class="analects-warning">âš ï¸ æœªæ‰¾åˆ°åŒ¹é…çš„ç« èŠ‚</div>'),this.isAutoLoadingEnabled=!1,e.a(2);case 1:r=t.data.filter(function(e){return!(!e.id||s.pagination.loadedIds.has(e.id)||(s.pagination.loadedIds.add(e.id),0))}),this.pagination.currentPage=1,this.pagination.totalLoaded=r.length,this.pagination.hasMore=this.pagination.totalLoaded<this.pagination.totalCount,n&&(c=this.pagination.totalCount>0?this.pagination.totalCount:r.length,this.pagination.hasMore?n.innerHTML='<div class="analects-success">âœ… æ‰¾åˆ° '.concat(c," æ¡ç»“æœï¼Œæ¯æ¬¡åŠ è½½ ").concat(this.pagination.pageSize," æ¡ï¼Œæ»šåŠ¨è‡ªåŠ¨åŠ è½½æ›´å¤š</div>"):(n.innerHTML='<div class="analects-success">âœ… å·²æ‰¾åˆ°å…¨éƒ¨ '.concat(c," æ¡ç»“æœ</div>"),(i=document.getElementById("analects-load-complete"))&&(i.style.display="block"))),r.forEach(function(e,t){setTimeout(function(){s.renderAnalectCard(e,a)},50*t)});case 2:return e.a(2)}},e,this)})),function(e,t,n){return u.apply(this,arguments)})},{key:"resetPagination",value:function(){Object.assign(this.pagination,{currentPage:0,totalLoaded:0,hasMore:!0,isLoading:!1,totalCount:0}),this.pagination.loadedIds.clear()}},{key:"handleSearchError",value:function(e,t,n){t&&(t.innerHTML='<div class="analects-error">âŒ æœç´¢å¤±è´¥ï¼š'.concat(e.message,"</div>")),n.innerHTML='\n      <div class="analects-error">\n        <h3>æœç´¢å¤±è´¥</h3>\n        <p>'.concat(e.message,'</p>\n        <p style="font-size: 14px; color: #666; margin-top: 12px;">\n          è¯·æ£€æŸ¥Supabaseé…ç½®æ˜¯å¦æ­£ç¡®ï¼Œæˆ–æŸ¥çœ‹æ§åˆ¶å°äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚\n        </p>\n      </div>\n    '),this.isAutoLoadingEnabled=!1}},{key:"loadMoreResults",value:(o=m(l().m(function e(){var t,n,a,r,c,i=this;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.pagination.isLoading&&this.pagination.hasMore&&this.isAutoLoadingEnabled){e.n=1;break}return e.a(2);case 1:return this.pagination.isLoading=!0,(t=document.getElementById("analects-loading-more"))&&(t.style.display="block"),e.p=2,e.n=3,this.fetchAnalects(this.currentFilters,this.pagination.currentPage,this.pagination.pageSize);case 3:n=e.v,a=n.data.filter(function(e){return!(!e.id||i.pagination.loadedIds.has(e.id)||(i.pagination.loadedIds.add(e.id),0))}),r=document.getElementById("analects-results-container"),a.forEach(function(e,t){setTimeout(function(){i.renderAnalectCard(e,r)},50*t)}),this.pagination.currentPage++,this.pagination.totalLoaded+=a.length,this.pagination.hasMore=this.pagination.totalLoaded<this.pagination.totalCount,this.updateScrollStatus(),e.n=5;break;case 4:e.p=4,e.v,(c=document.getElementById("analects-search-status"))&&(c.innerHTML='<div class="analects-error">âŒ åŠ è½½æ›´å¤šç»“æœå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</div>');case 5:return e.p=5,this.pagination.isLoading=!1,t&&(t.style.display="none"),e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return o.apply(this,arguments)})},{key:"updateScrollStatus",value:function(){var e=document.getElementById("analects-search-status"),t=document.getElementById("analects-load-complete");if(e&&0!==this.pagination.totalLoaded){var n=this.pagination.totalLoaded,a=this.pagination.totalCount;this.pagination.hasMore?e.innerHTML='\n        <div class="analects-success">\n          âœ… æ‰¾åˆ° '.concat(a," æ¡ç»“æœï¼Œå·²æ˜¾ç¤º ").concat(n," æ¡ï¼Œæ»šåŠ¨è‡ªåŠ¨åŠ è½½æ›´å¤š\n        </div>"):(e.innerHTML='\n        <div class="analects-success">\n          âœ… å…±æ‰¾åˆ° '.concat(a," æ¡ç»“æœï¼Œå·²å…¨éƒ¨æ˜¾ç¤ºå®Œæ¯•\n        </div>"),this.isAutoLoadingEnabled=!1,t&&(t.style.display="block"))}}},{key:"resetSearch",value:function(){var e=this,t=document.getElementById("analects-keyword");t&&(t.value=""),["character-search","argument-search","proverb-search","chapter-search"].forEach(function(t){var n=document.getElementById(t);n&&(n.value="",e.filterOptions(t.split("-")[0],""))});var n=document.querySelectorAll('.analects-tag-cloud input[type="checkbox"]'),a=document.querySelectorAll(".analects-option-tag");n.forEach(function(e){return e.checked=!1}),a.forEach(function(e){return e.classList.remove("selected")});var r=document.querySelector('input[data-type="chapter"][value="all"]');r&&(r.checked=!0,r.closest(".analects-option-tag").classList.add("selected")),this.selectedItems.characters.clear(),this.selectedItems.arguments.clear(),this.selectedItems.proverbs.clear(),this.selectedItems.chapter={id:"all",name:"å…¨éƒ¨ç« èŠ‚"};var c=document.getElementById("analects-results-container"),i=document.getElementById("analects-load-complete");c&&(c.innerHTML=""),i&&(i.style.display="none"),this.resetPagination(),this.isAutoLoadingEnabled=!1,this.searchConditionsChanged=!1;var s=document.getElementById("analects-search-btn");s&&s.classList.remove("search-changed"),this.renderSelectedItems(),this.showStatusMessage("ğŸ”„ å·²é‡ç½®æ‰€æœ‰æœç´¢æ¡ä»¶","success")}},{key:"showStatusMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,a=document.getElementById("analects-search-status");if(a){var r="success"===t?"analects-success":"error"===t?"analects-error":"analects-info";a.innerHTML='<div class="'.concat(r,'">').concat(e,"</div>"),n>0&&setTimeout(function(){return a.innerHTML=""},n)}}},{key:"testConnection",value:(r=m(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.apiRequest("characters",{limit:"1"});case 1:return t=e.v,e.a(2,{success:!0,message:"è¿æ¥æµ‹è¯•æˆåŠŸ",sampleData:t});case 2:return e.p=2,n=e.v,e.a(2,{success:!1,message:n.message,error:n})}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})}],t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,u,d,p,f,g,b,w,k,S,I,E,L,C,T}();"undefined"!=typeof window&&(window.AnalectsSDK=b,window.AnalectsSDK.copyText=function(){var e=m(l().m(function e(t,n){var a,r,c;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=n.title,e.p=1,!navigator.clipboard){e.n=3;break}return e.n=2,navigator.clipboard.writeText(t);case 2:e.n=4;break;case 3:if((r=document.createElement("textarea")).value=t,Object.assign(r.style,{position:"fixed",left:"-999999px",top:"-999999px"}),document.body.appendChild(r),r.focus(),r.select(),c=document.execCommand("copy"),document.body.removeChild(r),c){e.n=4;break}throw new Error("Copy command failed");case 4:n.title="å·²å¤åˆ¶ï¼",setTimeout(function(){return n.title=a},2e3),e.n=6;break;case 5:e.p=5,e.v,n.title="å¤åˆ¶å¤±è´¥",setTimeout(function(){return n.title=a},2e3);case 6:return e.a(2)}},e,null,[[1,5]])}));return function(t,n){return e.apply(this,arguments)}}(),window.initAnalects=function(e){return new b(e)}),"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("[data-analects-auto-init]");if(e){var t=e.getAttribute("data-supabase-url"),n=e.getAttribute("data-supabase-key");if(t&&n){var a=new b({supabaseUrl:t,supabaseKey:n});document.querySelectorAll("[data-analects-search]").forEach(function(e){return a.renderSearchInterface(e)}),document.querySelectorAll("[data-analects-daily]").forEach(function(e){return a.renderDailyAnalect(e)})}}}),e.exports&&(e.exports=b),t.default=b}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var c=t[a]={id:a,loaded:!1,exports:{}};return e[a](c,c.exports,n),c.loaded=!0,c.exports}n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e};var a=n(954);return a=a.default}()});
//# sourceMappingURL=analects.min.js.map